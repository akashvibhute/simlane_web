{% load i18n %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% blocktrans with club_name=invitation.club.name %}Invitation to join {{ club_name }}{% endblocktrans %}</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        line-height: 1.6;
        color: #333;
        background-color: #f8fafc;
      }

      .email-container {
        max-width: 600px;
        margin: 0 auto;
        background-color: #ffffff;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 40px 30px;
        text-align: center;
      }

      .header img {
        max-width: 120px;
        height: auto;
        margin-bottom: 20px;
      }

      .header h1 {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: 10px;
      }

      .header p {
        font-size: 16px;
        opacity: 0.9;
      }

      .content {
        padding: 40px 30px;
      }

      .greeting {
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 20px;
        color: #2d3748;
      }

      .invitation-details {
        background-color: #f7fafc;
        border-left: 4px solid #667eea;
        padding: 20px;
        margin: 25px 0;
        border-radius: 0 6px 6px 0;
      }

      .club-info {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
      }

      .club-logo {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        margin-right: 15px;
        object-fit: cover;
      }

      .club-logo-placeholder {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        margin-right: 15px;
        background-color: #e2e8f0;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #64748b;
        font-weight: 600;
      }

      .club-name {
        font-size: 20px;
        font-weight: 700;
        color: #2d3748;
        margin: 0;
      }

      .role-badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .role-admin {
        background-color: #fed7d7;
        color: #c53030;
      }

      .role-teams-manager {
        background-color: #fef5e7;
        color: #d69e2e;
      }

      .role-member {
        background-color: #c6f6d5;
        color: #38a169;
      }

      .personal-message {
        background-color: #edf2f7;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        font-style: italic;
        border-left: 4px solid #4a5568;
      }

      .personal-message-label {
        font-size: 14px;
        font-weight: 600;
        color: #4a5568;
        margin-bottom: 8px;
      }

      .action-buttons {
        text-align: center;
        margin: 35px 0;
      }

      .btn {
        display: inline-block;
        padding: 15px 30px;
        margin: 0 10px;
        text-decoration: none;
        border-radius: 6px;
        font-weight: 600;
        font-size: 16px;
        transition: all 0.3s ease;
      }

      .btn-accept {
        background-color: #48bb78;
        color: white;
      }

      .btn-accept:hover {
        background-color: #38a169;
      }

      .btn-decline {
        background-color: #e2e8f0;
        color: #4a5568;
      }

      .btn-decline:hover {
        background-color: #cbd5e0;
      }

      .club-description {
        background-color: #f7fafc;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
      }

      .club-description h3 {
        font-size: 16px;
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 10px;
      }

      .club-links {
        margin-top: 15px;
      }

      .club-links a {
        display: inline-block;
        color: #667eea;
        text-decoration: none;
        margin-right: 15px;
        font-size: 14px;
      }

      .club-links a:hover {
        text-decoration: underline;
      }

      .footer {
        background-color: #edf2f7;
        padding: 30px;
        text-align: center;
        color: #718096;
        font-size: 14px;
      }

      .footer a {
        color: #667eea;
        text-decoration: none;
      }

      .footer a:hover {
        text-decoration: underline;
      }

      .expiry-notice {
        background-color: #fef5e7;
        border: 1px solid #f6e05e;
        border-radius: 6px;
        padding: 15px;
        margin: 20px 0;
        text-align: center;
      }

      .expiry-notice strong {
        color: #d69e2e;
      }

      @media (max-width: 480px) {
        .email-container {
          margin: 0;
          box-shadow: none;
        }

        .header,
        .content,
        .footer {
          padding: 20px;
        }

        .header h1 {
          font-size: 24px;
        }

        .btn {
          display: block;
          margin: 10px 0;
        }

        .club-info {
          flex-direction: column;
          text-align: center;
        }

        .club-logo,
        .club-logo-placeholder {
          margin: 0 0 10px 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="email-container">
      <!-- Header -->
      <div class="header">
        <img src="https://simlane.com/static/images/logo_inverted.png"
             alt="SimLane" />
        <h1>{% trans "Club Invitation" %}</h1>
        <p>{% trans "You've been invited to join a racing club!" %}</p>
      </div>
      <!-- Content -->
      <div class="content">
        <div class="greeting">{% trans "Hi there!" %}</div>
        <p>
          {% blocktrans with inviter_name=invitation.inviter.get_full_name|default:invitation.inviter.username club_name=invitation.club.name %}
                    <strong>{{ inviter_name }}</strong> has invited you to join <strong>{{ club_name }}</strong> on SimLane!
                {% endblocktrans %}
        </p>
        <!-- Invitation Details -->
        <div class="invitation-details">
          <div class="club-info">
            {% if invitation.club.logo_url %}
              <img src="{{ invitation.club.logo_url }}"
                   alt="{{ invitation.club.name }}"
                   class="club-logo" />
            {% else %}
              <div class="club-logo-placeholder">{{ invitation.club.name|first }}</div>
            {% endif %}
            <div>
              <h2 class="club-name">{{ invitation.club.name }}</h2>
              <span class="role-badge role-{{ invitation.role|lower }}">{{ invitation.get_role_display }}</span>
            </div>
          </div>
          {% if invitation.club.description %}
            <div class="club-description">
              <h3>{% trans "About this club" %}</h3>
              <p>{{ invitation.club.description }}</p>
              {% if invitation.club.website or invitation.club.social_links %}
                <div class="club-links">
                  {% if invitation.club.website %}
                    <a href="{{ invitation.club.website }}" target="_blank">üåê {% trans "Website" %}</a>
                  {% endif %}
                  {% if invitation.club.social_links %}
                    {% for platform, url in invitation.club.social_links.items %}
                      <a href="{{ url }}" target="_blank">{{ platform|capfirst }}</a>
                    {% endfor %}
                  {% endif %}
                </div>
              {% endif %}
            </div>
          {% endif %}
        </div>
        <!-- Personal Message -->
        {% if invitation.personal_message %}
          <div class="personal-message">
            <div class="personal-message-label">
              {% trans "Personal message from" %} {{ invitation.inviter.get_full_name|default:invitation.inviter.username }}:
            </div>
            <p>{{ invitation.personal_message }}</p>
          </div>
        {% endif %}
        <!-- Action Buttons -->
        <div class="action-buttons">
          <a href="{{ accept_url }}" class="btn btn-accept">‚úì {% trans "Accept Invitation" %}</a>
          <a href="{{ decline_url }}" class="btn btn-decline">‚úó {% trans "Decline" %}</a>
        </div>
        <!-- Expiry Notice -->
        <div class="expiry-notice">
          <strong>‚è∞ {% trans "This invitation expires on" %} {{ invitation.expires_at|date:"F j, Y \a\t g:i A T" }}</strong>
        </div>
        <!-- Role Explanation -->
        <div style="margin-top: 30px;
                    padding: 20px;
                    background-color: #f0f4f8;
                    border-radius: 8px">
          <h3 style="color: #2d3748; margin-bottom: 15px;">{% trans "What does this role mean?" %}</h3>
          {% if invitation.role == 'ADMIN' %}
            <p>
              <strong>{% trans "Admin" %}:</strong> {% trans "You'll have full access to manage the club, including member management, event creation, and team allocation. You can also modify club settings and invite other members." %}
            </p>
          {% elif invitation.role == 'TEAMS_MANAGER' %}
            <p>
              <strong>{% trans "Teams Manager" %}:</strong> {% trans "You can create event signups, allocate teams, manage stint plans, and invite new members. You cannot modify club settings or remove other admins." %}
            </p>
          {% else %}
            <p>
              <strong>{% trans "Member" %}:</strong> {% trans "You can view club events, sign up for races, and participate in team activities. This is the standard membership level for racing together!" %}
            </p>
          {% endif %}
        </div>
        <!-- Getting Started -->
        <div style="margin-top: 25px;">
          <h3 style="color: #2d3748; margin-bottom: 15px;">{% trans "Getting Started" %}</h3>
          <ul style="margin-left: 20px; color: #4a5568;">
            <li>{% trans "Accept this invitation to join the club" %}</li>
            <li>{% trans "Complete your sim racing profile if you haven't already" %}</li>
            <li>{% trans "Browse upcoming events and sign up for races" %}</li>
            <li>{% trans "Connect with other club members and start racing!" %}</li>
          </ul>
        </div>
      </div>
      <!-- Footer -->
      <div class="footer">
        <p>
          {% trans "This invitation was sent from" %} <a href="https://simlane.com">SimLane</a>
          <br />
          {% trans "If you didn't expect this invitation, you can safely ignore this email." %}
        </p>
        <p style="margin-top: 15px;">
          <a href="{{ unsubscribe_url }}">{% trans "Unsubscribe from club invitations" %}</a> |
          <a href="mailto:support@simlane.com">{% trans "Contact Support" %}</a>
        </p>
        <p style="margin-top: 15px; font-size: 12px; color: #a0aec0;">
          {% trans "SimLane - The ultimate platform for sim racing clubs and communities" %}
        </p>
      </div>
    </div>
  </body>
</html>
